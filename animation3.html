<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fireworks</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <link href="./css/layout.css" rel="stylesheet">
</head>
<body>
    <canvas class="myCanvas"></canvas>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
    <script>
        const canvas = document.querySelector(".myCanvas");
        const ctx = canvas.getContext("2d");
        const frameDelay = 100; // Delay between frames in milliseconds
        const frameFiles = [
            "./img/blast1.gif",
            // "./img/blast2.gif",
            // "./img/blast1.gif",
            // Add more frame file paths here
        ];

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        function explode(x, y, frames) {
            let currentFrameIndex = 0;

            function animateExplosion() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                const currentFrame = frames[currentFrameIndex];
                const image = new Image();

                image.onload = function () {
                    ctx.drawImage(image, x - image.width / 2, y - image.height / 2);

                    currentFrameIndex++;
                    if (currentFrameIndex >= frames.length) {
                        // Animation ends, do something here if needed
                        return;
                    }

                    setTimeout(animateExplosion, frameDelay);
                };

                image.src = currentFrame;
            }

            animateExplosion();
        }

        
        window.addEventListener('keydown', handleKeyPress);
        function handleKeyPress(event) {
            console.log('hi');
        }
        
        canvas.addEventListener("click", (event) => {
            const rect = canvas.getBoundingClientRect();
            const mouseX = event.clientX - rect.left;
            const mouseY = event.clientY - rect.top;

            explode(mouseX, mouseY, frameFiles);
        });
        
    </script>
</body>
</html>
