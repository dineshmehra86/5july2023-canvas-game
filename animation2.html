<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fireworks</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <link href="./css/layout.css" rel="stylesheet">
</head>
<body>
    <canvas class="myCanvas"></canvas>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/gifuct-js-plus@2.0.0/dist/gifuct-js-plus.min.js"></script>
    <script>
        let canvas = document.querySelector('.myCanvas');
        canvas.width = window.innerWidth - 10;
        canvas.height = window.innerHeight - 10;
        const ctx = canvas.getContext('2d');
        const gifUrl = './img/blast1.gif';

        // Set the canvas size
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        // Define the explosion function
        function explode(x, y, radius, color) {
        // Create an array of particles
        const particles = [];
        const particleCount = 100;
        const particleSize = 30;
        const explosionStrength = 100;

        for (let i = 0; i < particleCount; i++) {
            particles.push({
            x: x,
            y: y,
            radius: Math.random() * 5 + 1, // Random radius between 1 and 6
            color: color,
            speed: {
                x: Math.random() * 2 - 1, // Random x velocity between -1 and 1
                y: Math.random() * 2 - 1, // Random y velocity between -1 and 1
            },
            });
        }

        // Animate the explosion
        function animateExplosion() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            particles.forEach((particle) => {
            particle.x += particle.speed.x;
            particle.y += particle.speed.y;

            // Decrease the particle radius over time
            particle.radius -= 0.05;

            if (particle.radius > 0) {
                ctx.beginPath();
                ctx.arc(particle.x, particle.y, particle.radius, 0, Math.PI * 2);
                ctx.fillStyle = particle.color;
                ctx.fill();
                ctx.closePath();
            }
            });

            // Remove particles with radius <= 0
            particles.splice(
            particles.findIndex((particle) => particle.radius <= 0),
            1
            );

            // Request animation frame
            if (particles.length > 0) {
            requestAnimationFrame(animateExplosion);
            }
        }

        // Start the animation
        animateExplosion();
        }

// Call the explode function on click
canvas.addEventListener("click", (event) => {
  const rect = canvas.getBoundingClientRect();
  const mouseX = event.clientX - rect.left;
  const mouseY = event.clientY - rect.top;
  explode(mouseX, mouseY, 100, "red");
});


        // window.addEventListener('keydown', handleKeyPress);
        // function handleKeyPress(event) {
        //     console.log('hi');
        // }
    </script>
</body>
</html>
